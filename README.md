# Бот для проведения викторин для TG и VK

## Установка и настройка

Проверьте, что `python` установлен и корректно настроен. Запустите его в командной строке:
```sh
python --version
```

Возможно, вместо команды `python` здесь и в остальных инструкциях этого README придётся использовать `python3`. Зависит это от операционной системы и от того, установлен ли у вас Python старой второй версии. 

Скачайте код: `git clone https://github.com/Jaggmort/quiz.git`

В каталоге проекта создайте виртуальное окружение:
```sh
python -m venv venv
```
Активируйте его. На разных операционных системах это делается разными командами:

- Windows: `.\venv\Scripts\activate`
- MacOS/Linux: `source venv/bin/activate`

Установите зависимости в виртуальное окружение:
```sh
pip install -r requirements.txt
```

## Определите переменные окружения. 
Создать файл `.env` в каталоге `quiz/` и заполните переменные окружения:
```sh
TELEGRAM_TOKEN - Токен телеграм бота.
TG_ANNOUNCE_TOKEN -  Токен телеграм бота, используемого для получения информации об ошибках.
TELEGRAM_USER_ID - Телеграм ид пользователя, которому будет отсылаться информация об ошибках.
VK_CHAT_TOKEN - Токен вк чата (позволяет постить в нужной группе).
REDIS_HOST - Адрес редиса (по умлочанию - localhost).
REDIS_PORT - Порт редиса (по умлочанию - 6379).
REDIS_PASSWORD - Пароль редиса (по умлочанию - отсутствует).
REDIS_DB - Номер базы данных редиса (по умолчанию - 0).
```

## Установка Redis

[Установка на linux](https://redis.io/docs/getting-started/installation/install-redis-on-linux/)
При работе с серверами selectel стоит использовать версию редис=5:6.0.16-1ubuntu1

Проверить доступ к серверу можно командой
`redis-cli  ping`
ответом должно быть сообщение
`PONG`

## Подготовка данных

Запустите модуль `python data_upload.py --file FILE`
где File - путь к файлу, содержащему вопросы и ответы.

## Зауск бота

Для запуска Телеграм бота - `python tg.py`
Для запуска VK бота - `python vk.py`

Каждый экземпляр бота должен запускаться в отдельном экземпляре командной строки или прописан как служба.



